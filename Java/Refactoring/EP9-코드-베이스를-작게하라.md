# 유지보수와 리팩토링
## EP 9. 코드 베이스를 작게 하라

> 코드베이스를 가능한 한 작게 한다.



### 코드베이스
코드베이스(codebase)는 하나의 레파지토리에 저장된 소스 코드 뭉치로 컴파일 및 배포를 독립적으로 수행하는 단위이다.
시스템은 적어도 하나 이상의 코드베이스를 지니는데 제법 규모가 큰 시스템이면 코드베이스가 1개 이상인 경우가 많다.


### 대규모 소프트웨어 시스템의 부작용
1. 실패할 가능성이 높다.
2. 유지보수하기 어렵다.
3. 결함 밀도가 높다.


### 가이드
1. 범위 추가(scope creep)에 맞서라, 있으면 좋은 기능을 줄이자.
2. 기능을 표준화하라
3. 코드를 복사 후 붙여넣기 하지 않는다
4. 기존 코드를 리팩터링한다
5. 서드파티 라이브러리/프레임워크를 사용한다.
6. 대규모 시스템을 분리한다.


### 의견
- Q. 개발자가 추가한 코드량으로 프로그래밍 생산성을 표시하기 때문에 시스템 크기를 줄일 수 없다.  
  A. 즉각 이슈를 공론화해라. 추가한 코드량에 따라 생산성을 측정하는 것은 대충 복사 후 붙여넣기 하는 나쁜 습관을 부추기는 잘못된 관행이다.
- Q. 프로그래밍 언어 때문에 코드베이스 크기를 줄일 수 없다.  
  A. 코드베이스를 도저히 작게 할 수 없는 언어(예: SQL 기반 언어)도 분명히 있지만 지금보다 더 작은 코드베이스를 짜내려는 노력은 해볼 수 있다. 추상화 여지가 거의 없는 저수준 언어로 짠 코드베이스라도 크기가 줄면 여러 면에서 이롭다.
- Q. 시스템이 복잡해서 기존부터 쓰던 큼지막한 코드 덩어리를 복사해서 쓸 수 밖에 없다.  
  A. 기존 코드를 분석하기 어려워서, 코드를 건드리는게 두려워서와 같은 말은 흔해빠진 프로그래머의 변명일 뿐이다. 자동화한 테스트가 턱없이 부족할때 특히 그렇다.
- Q. 코드베이스를 나누면 코드가 중복될 수밖에 없지 않나?  
  A. 시스템을 플러그인/확장본 같은 개별적인 부분으로 떼어놓으면 공통 기능이나 데이터 구조가 중복될 수 있다. 이럴 때는 코드 중복이 더 큰 문제라서 코드 중복에 관한 가이드라인을 우선해라.
- Q. 시스템이 파트별로 단단하게 결합되어 있어서 찢을 수 없다.  
  A. 정말 그렇다면 기능에 접근하는 단일 창구 역할을 할 인터페이스를 구체적으로 작성해 시스템을 먼저 분리하면 된다.