# 유지보수와 리팩토링
## EP 10. 테스트를 자동화하라

> 테스트를 자동화한다.



### 수동 테스트의 문제점
1. 일일이 테스트 케이스를 손으로 입력해야한다.
2. 개발자는 테스트 자체가 아닌, 테스트 실행에 필요한 로직에 집중하게 된다.
3. 어떻게 작동해야 맞는지 알 수 없다.
4. 이 프로그램이 테스트인지 잘 구분되지 않는다.


### 테스트 자동화의 장점
1. 테스트를 정확히 똑같이 실행할 수 있어서 시스템 어딘가가 바뀌어 결과가 다르게 나온 거라 볼 수 있다.
2. 자동화한 테스트는 원하는 만큼 얼마든지 반복시킬 수 있다. 눈으로 코드를 보는 것보다 빠르다.
3. 회귀가 발생하는 시점을 알 수 있어 좋다. 미리 정해진 경로를 따라가므로 일단 버그를 잡고 나면 같은 버그가 두 번 다시 안 나올거라 보장할 수 있다.
4. 시스템이 어떤 일을 해야 하는지 보여주는 하나의 실례이다.
5. TDD방법론에서는 코드를 작성하기 전, 단위 테스트를 먼저 작성하라고 이야기한다. 테스트를 어떻게 할지를 생각하면 메서드를 디자인하기가 한결 수월해진다.


### 단위 테스트를 올바르게 작성하기 위한 일반적인 원칙
* 정상적인 입력을 받아 의도한 대로 단위 코드가 작동하는지, 비정상 입력과 특이한 환경에서도 단위 코드가 알아서 잘 움직이는지 각각 테스트를 작성하여 확인한다.
* 테스트 결과에는 테스트할 대상의 로직만이 반영되어 있어야한다.
* 파일 시스템 또는 DB 서버에 접속하는 클래스를 대상으로 단위 테스트를 작성하는 건 잘못된 발상이다.


### 의견
- Q. 어차피 테스트는 수동으로 해봐야 하는데 굳이 테스트 자동화에 투자할 이유가 있나?  
  A. 수동 테스트는 한계가 분명하다. 작업이 더디고 비용이 많이 들면서 일정하게 반복하기 어렵다.
- Q. 우리 시스템은 단위 테스트 커버리지가 아주 낮다. 그럼, 굳이 지금 단위 테스트를 작성하느라 시간을 쏟아야할 필요가 있나?  
  A. 이미 개발된 시스템이라도 언젠가는 단위 전체를 분석해야 할 테니 처음부터 단위 테스트를 작성하는 데 들인 시간은 아주 의미 있는 투자라고 할 수 있다.
