## HTTP 기본 지식
# EP 5. HTTP 상태

### HTTP 상태를 어떻게 알 수 있나?
- 1xx (informationnal): 요청이 수신되어 처리 중
- 2xx (Successful): 요청 정상 처리
- 3xx (Redirection): 요청을 완료하려면 추가 행동이 필요
- 4xx (Client Error): 클라이언트 오류, 잘못된 문법 등으로 서버가 요청을 수행할 수 없음 
- 5xx (Server Error): 서버 오류, 서버가 정상 요청을 처리하지 못함  
클라이언트가 보낸 요청의 응답에 처리 상태를 알려준다. 모르는 상태 코드라고 하더라도 몇 백번 대인지 보고 해석해서 처리할 수 있다.

### 2xx의 종류는? 
- 200 OK: 요청 성공
- 201 Created: 요청 성공해서 새로운 리소스가 생성됨 (Location Header를 같이 반환)
- 202 Accepted: 요청이 접수되었으나 처리가 완료되지 않음
- 204 No Content: 서버가 요청을 성공적으로 수했했지만, 응답 페이로드 본문에 보낼 데이터가 없음

### Redirect란?
웹 브라우저는 3xx 응답 결과에 Location 헤더가 있으면, Location 위치로 자동 이동한다. 리다이렉트된다고 말한다. 영구 리다이렉션(URI 영구적 이동), 일시 리다이렉션(일시적인 변경), 특수 리다이렉션(캐시를 이용)이 있다.

### 3xx의 종류는?
- 300 Multiple Choices (기타 리다이렉션)
- 301 Moved Permanently (영구 리다이렉션)
- 302 Found (일시 리다이렉션)
- 303 See Other (일시 리다이렉션)
- 304 Not Modified (기타 리다이렉션)
- 307 Temporary Redirect (일시 리다이렉션)
- 308 Permanent Redirect (영구 리다이렉션)
 
### 영구 Redirect의 특징?
영구 리다이렉션은 검색 엔진도 변경사항을 인지할 수 있다.  301은 GET방식으로 요청이 바뀌어 전달하려는 데이터가 소실되지만 308은 POST방식으로 이어 전달할 수 있다. 보통 잘 사용하지 않는다.

### 일시 Redirect의 특징?
302는 301과 같이 GET방식으로 변경되어 전달하려는 데이터가 소실된다. 307은 302와 기능은 같지만 요청 메서드와 데이터를 유지하고 있다. 303은 요청 메서드가 GET으로 변경된다. 중복전송이 될 수 있는 것을 방지하기 위해 PRG(POST/Redict/GET)을 사용한다.

### 그래서 어떤걸 써야하는가?
302 스펙의 의도는 HTTP 메서드를 유지하는 것인데 대부분의 웹 브라우저들이 대부분 GET으로 바꾸어 버리거나 다르게 동작하기 때문에 명확한 303, 307이 등장했다. (301에 대응하는 308과 같다.) 이후에 나온 것을 권장하며 많은 사례들이 302를 기본값으로 사용한다. GET으로 변해도 상관없으면 302를 사용해도 된다.

### 기타 리다이렉션의 특징?
캐시를 목적으로 사용하고 리소스가 수정되지 않았음을 클라이언트에게 알려주기 위해 사용한다. 클라이언트는 로컬에 저장된 캐시를 재사용하게 된다. 또한 메시지 바디를 포함하지 않는다. 

### 서버나 클라이언트의 오류는?
클라이언트가 요청 과정에서 요청 구문이나 메시지 등 잘못이 있으므로 서버가 요청을 수행할 수 없을 때 4xx으로 알리고 있고 클라이언트의 요청 파라미터나 API 스펙의 검토가 필요하다. 서버에 내부 문제가 있을때는 5xx 으로 알리며 재시도를 통해서도 해결되는 경우가 있기도 하다.

- 401 Unauthorized: 클라이언트가 해당 리소스에 대한 인증이 필요함(로그인이나 권한문제)
- 403 Forbidden: 서버가 요청을 이해했지만 승인을 거부함(인증은 됐지만 권한문제)
- 404 Not Found: 요청 리소스를 찾을 수 없음(또는 권한이 부족한 리소스에 접근하거나 숨기고 싶을때)
- 500 Internal Server Error: 서버 문제로 오류발생
- 503 Service Unavailable: 서비스 이용불가  (일시적이거나 예정된 작업으로 잠시 요청을 처리할 수 있다. 헤더 필드로 복구예상시간을 보내기도한다.)